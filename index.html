<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>帝王世系</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="scripts/vivagraph.js"></script>
		<script src="scripts/main.js"></script>
		<!-- script src="scripts/utils.js"></script -->
        
        <script type='text/javascript'>

        
            $(function() {
                dataReady = true
                jHist.init_display()

                // window resize event handler
                $( window ).resize(function() { onWindowResize() });
				
				fetch_json()

				
            })
			
			function fetch_json() {
				console.log('fetch file...')
				var file = '/data/shang_gu.json'
				$.ajax({
					dataType: "json",
					async: true,
					url: file,
					success: function(response) {
						jHist.addNodes(response.nodes)
						jHist.addLinks(response.links)
						//console.dir(response)
					},
					error: function(xhr, ajaxOptions, thrownError){
						console.dir('failed to fetch file ' + file)
						console.dir(xhr)
					}
				});
			}
            
			function onWindowResize(){
				if (dataReady) {
					renderer.reset()
				}
			}

        </script>
        <style type='text/css'>
            body, svg, #graphContainer {
                height: 100%;
                width: 100%;
                position: absolute;
                margin: 0;
            }
            .label {
                position: absolute;
                top: 10px;
                color: white;
                font-size: 18px;
                left: 10px;
                font-family: Verdana;
            }
        </style>
    </head>
    <body>
        <div id='graphContainer'></div>
    </body>
</html>
